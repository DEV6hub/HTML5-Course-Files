<!doctype html>
<html>
<head>
    <title>JavaScript &mdash; ECMAScript 5</title>
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">

</head>
<body>
    <div class="container">
        <h1>JavaScript &mdash; ECMAScript 5</h1>
        Goals:
        <ul>
            <li>Don’t break the web</li>
            <li>Improve the language for the users of the language</li>
            <li>Third party security (mashups)</li>
            <li>No new syntax</li>
            <li>And a non-goal was “protect stupid people from themselves”</li>
        </ul>

        <a href="http://ejohn.org/blog/ecmascript-5-objects-and-properties/" target="_blank">http://ejohn.org/blog/ecmascript-5-objects-and-properties/</a>
        <br/>
        <a href="https://github.com/kriskowal/es5-shim/" target="_blank">https://github.com/kriskowal/es5-shim/</a>
        <br/>
        <a href="https://dev.modern.ie/testdrive/" target="_blank">https://dev.modern.ie/testdrive/</a>
        <br/>
        <br/>

        <button class="btn btn-default" onclick="APP.strictFunction()">Call strict function</button>
        <br/>
        <button class="btn btn-default" onclick="APP.parseJSONNatively()">Parse some JSON (without jQuery)</button>
        <br/>
        <button class="btn btn-default" onclick="APP.testRestrictedProperty()">Test Object with restricted property</button>
        <br/>
        <script>
            var APP = {
                strictFunction : null,
                parseJSONNatively : null,
                testRestrictedProperty : null
            };

        // Strict Mode
        APP.strictFunction = function () {
            'use strict';

            var myVar = 10;
            console.log('myVar: ' + myVar);

        };

        // Block 1: Native JSON parsing
        APP.parseJSONNatively = function () {
           var myObject = JSON.parse('{"name":"value", "obj":{"otherName":"otherVal"}}');
           console.log('myObject:');
           console.log(myObject);
       };

        // Block 2: Defining restrictive properties
        APP.testRestrictedProperty = function () {
           var person = Object.create(null);
           Object.defineProperty(person,
               "dateOfBirth",
               {   value : (new Date()),
                   writable : false, // allows re-assignment
                   enumerable : true, // shows up in for...in loop
                   configurable : false // property can be deleted (using "delete" syntax")
               });

           person.dateOfBirth = 'what?';
           console.log('person.dateOfBirth: ' + person.dateOfBirth);

           console.log('Starting enumeration...');
           for(var prop in person) {
               console.log('person[prop]: ' + person[prop]);
           }
           console.log('Finished enumeration.');
       };

   </script>
</div>
</body>
</html>
